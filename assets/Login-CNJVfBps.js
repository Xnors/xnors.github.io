import{r as i,c as u,a as e,b as p,t as m,i as f,v as g,g as _,u as b,l as x,f as n}from"./index-5P_dbo5I.js";import{_ as w,a as y}from"./_plugin-vue_export-helper-C5sZm8X9.js";const T={class:"login-container"},V={class:"form-card"},h={key:0,class:"error-box"},C={key:1,class:"success-box"},B={class:"form-group"},I={class:"form-group"},M={class:"link-text"},N={__name:"Login",setup(S){const a=i(""),t=i(""),l=i(""),r=i(""),d=x(),k=()=>{if(!l.value||!r.value){a.value="用户名和密码不能为空",t.value="";return}const c={username:l.value,password:r.value};y.post("/login/",c).then(s=>{s.data.access&&s.data.refresh?(localStorage.setItem("accessToken",s.data.access),localStorage.setItem("refreshToken",s.data.refresh),a.value="",t.value="登录成功！即将跳转到主页...",setTimeout(()=>{d.push("/home")},1e3)):(a.value="登录响应中缺少token信息",t.value="")}).catch(s=>{var o,v;a.value=((v=(o=s.response)==null?void 0:o.data)==null?void 0:v.error)||s.message||"登录失败",t.value=""})};return(c,s)=>(n(),u("div",T,[s[7]||(s[7]=e("div",{class:"background"},[e("div",{class:"circle circle1"}),e("div",{class:"circle circle2"}),e("div",{class:"circle circle3"})],-1)),e("div",V,[s[6]||(s[6]=e("h2",{class:"form-title"},"登录",-1)),a.value?(n(),u("div",h,m(a.value),1)):p("",!0),t.value?(n(),u("div",C,m(t.value),1)):p("",!0),e("div",B,[s[3]||(s[3]=e("label",{for:"username"},"用户名",-1)),f(e("input",{type:"text",id:"username","onUpdate:modelValue":s[0]||(s[0]=o=>l.value=o),placeholder:"请输入用户名"},null,512),[[g,l.value]])]),e("div",I,[s[4]||(s[4]=e("label",{for:"password"},"密码",-1)),f(e("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=o=>r.value=o),placeholder:"请输入密码"},null,512),[[g,r.value]])]),e("button",{onClick:k,class:"btn-primary"},"登录"),e("p",M,[s[5]||(s[5]=_("还没有账号? ",-1)),e("a",{onClick:s[2]||(s[2]=()=>b(d).push("/signup"))},"点击注册")])])]))}},U=w(N,[["__scopeId","data-v-8db98616"]]);export{U as default};
