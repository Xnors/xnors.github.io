import{r as a,c,a as s,b as g,t as w,j as i,v as d,g as k,u as h,k as V,f as m}from"./index-uqIJUZIc.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={class:"signup-container"},U={class:"form-card"},B={key:0,class:"error-box"},P={key:1,class:"success-box"},S={class:"form-group"},T={class:"form-group"},j={class:"form-group"},N={class:"form-group"},E={class:"link-text"},M={__name:"Signup",setup(z){const t=a(""),l=a(""),p=a(""),n=a(""),r=a(""),v=a(""),f=V(),x=()=>/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(r.value),y=()=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value),b=()=>{if(r.value!==v.value){t.value="两次输入的密码不一致",l.value="";return}if(!x(r.value)){t.value="密码长度最小为8位且必须包含数字和字母";return}if(!y(n.value)){t.value="请输入有效的邮箱地址";return}const u={username:p.value,email:n.value,password:r.value};fetch("http://xnors.pythonanywhere.com/api/signup/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(e=>e.ok?e.json().then(o=>o):e.json().then(o=>{throw new Error(o.error||"注册失败")})).then(e=>{t.value="",l.value="注册成功！即将跳转到登录页面...",setTimeout(()=>{f.push("/login")},1e3)}).catch(e=>{t.value=e.message,l.value=""})};return(u,e)=>(m(),c("div",C,[e[11]||(e[11]=s("div",{class:"background"},[s("div",{class:"circle circle1"}),s("div",{class:"circle circle2"}),s("div",{class:"circle circle3"})],-1)),s("div",U,[e[10]||(e[10]=s("h2",{class:"form-title"},"注册",-1)),t.value?(m(),c("div",B,w(t.value),1)):g("",!0),l.value?(m(),c("div",P,w(l.value),1)):g("",!0),s("div",S,[e[5]||(e[5]=s("label",{for:"username"},"用户名",-1)),i(s("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=o=>p.value=o),placeholder:"请输入用户名"},null,512),[[d,p.value]])]),s("div",T,[e[6]||(e[6]=s("label",{for:"email"},"邮箱",-1)),i(s("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),placeholder:"请输入邮箱"},null,512),[[d,n.value]])]),s("div",j,[e[7]||(e[7]=s("label",{for:"password"},"密码",-1)),i(s("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=o=>r.value=o),placeholder:"请输入密码"},null,512),[[d,r.value]])]),s("div",N,[e[8]||(e[8]=s("label",{for:"confirmPassword"},"确认密码",-1)),i(s("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[3]||(e[3]=o=>v.value=o),placeholder:"请再次输入密码"},null,512),[[d,v.value]])]),s("button",{onClick:b,class:"btn-primary"},"注册"),s("p",E,[e[9]||(e[9]=k("已有账号? ",-1)),s("a",{onClick:e[4]||(e[4]=()=>h(f).push("/login"))},"点击登录")])])]))}},O=_(M,[["__scopeId","data-v-0e017ed8"]]);export{O as default};
