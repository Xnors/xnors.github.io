import{r as n,c as i,a as s,b as p,t as v,j as m,v as f,g as h,u as k,k as y,f as u}from"./index-DgOrvEYy.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";const b={class:"login-container"},x={class:"form-card"},w={key:0,class:"error-box"},T={key:1,class:"success-box"},S={class:"form-group"},V={class:"form-group"},j={class:"link-text"},C={__name:"Login",setup(N){const t=n(""),r=n(""),a=n(""),l=n(""),c=y(),g=()=>{if(!a.value||!l.value){t.value="用户名和密码不能为空",r.value="";return}const d={username:a.value,password:l.value};fetch("http://xnors.pythonanywhere.com/api/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(e=>e.ok?e.json().then(o=>o):e.json().then(o=>{throw new Error(o.error||"登录失败")})).then(e=>{localStorage.setItem("accessToken",e.access),localStorage.setItem("refreshToken",e.refresh),t.value="",r.value="登录成功！即将跳转到主页...",setTimeout(()=>{c.push("/home")},1e3)}).catch(e=>{t.value=e.message,r.value=""})};return(d,e)=>(u(),i("div",b,[e[7]||(e[7]=s("div",{class:"background"},[s("div",{class:"circle circle1"}),s("div",{class:"circle circle2"}),s("div",{class:"circle circle3"})],-1)),s("div",x,[e[6]||(e[6]=s("h2",{class:"form-title"},"登录",-1)),t.value?(u(),i("div",w,v(t.value),1)):p("",!0),r.value?(u(),i("div",T,v(r.value),1)):p("",!0),s("div",S,[e[3]||(e[3]=s("label",{for:"username"},"用户名",-1)),m(s("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=o=>a.value=o),placeholder:"请输入用户名"},null,512),[[f,a.value]])]),s("div",V,[e[4]||(e[4]=s("label",{for:"password"},"密码",-1)),m(s("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=o=>l.value=o),placeholder:"请输入密码"},null,512),[[f,l.value]])]),s("button",{onClick:g,class:"btn-primary"},"登录"),s("p",j,[e[5]||(e[5]=h("还没有账号? ",-1)),s("a",{onClick:e[2]||(e[2]=()=>k(c).push("/signup"))},"点击注册")])])]))}},M=_(C,[["__scopeId","data-v-3f55288d"]]);export{M as default};
